# Shop X Hedron (WIP)

<div style="text-align: center;">
    <img src="resources/docs/hedron-stability-stable-dif-xl.png" alt="Shop X Hedron" width="360"/>
    <div><small>Generated by: <a href="https://stability.ai/stable-diffusion" target="_blank">Stability AI Stable Diffusion XL</a></small></div>
</div>

## Notes

I have used DDD to define the program interfaces and the business logic, the code is located at `app/Domains` folder

The service interfaces were build around RPC with *Input *Output, similar to gRPC messages for request/response.

### Running locally

Init with docker compose

```bash
$ docker compose -f ./compose/local/compose.yaml up -d --build
```

Running containers should look like this:

```text
[+] Running 2/2
 ✔ Container shop-x-hedron-nginx-1  Started                                                                                                                                0.4s 
 ✔ Container shop-x-hedron-php-1    Started
```

Next commands:

```bash
$ cp .env.example .env
$ docker exec -it shop-x-hedron-php-1 sh
# once inside the container
$ composer install
$ php artisan migrate
```

Everything should be ready to go. At this point you can use the Postman Collection or OpenAPI Specification to test the
API both are located at `api/` folder

### Running tests

```bash
$ docker exec -it shop-x-hedron-php-1 sh
# once inside the container
$ php artisan test
```

---
File structure:

```text
.
├── Carts
│   ├── CartItemRepositoryEloquent.php
│   ├── CartItemRepositoryInterface.php
│   ├── CartRepositoryEloquent.php
│   ├── CartRepositoryInterface.php
│   ├── CartService.php
│   ├── CartServiceInterface.php
│   ├── Entities
│   │   ├── Cart.php
│   │   └── CartItem.php
│   ├── Exceptions
│   │   ├── CartItemNotFoundException.php
│   │   ├── CartItemQuantityExceededStockException.php
│   │   ├── CartItemQuantityException.php
│   │   ├── CartNotFoundException.php
│   │   ├── InvalidUuidException.php
│   │   └── NoSessionIdException.php
│   ├── ServiceProvider.php
│   ├── Specs
├── Checkout
│   ├── CheckoutService.php
│   ├── CheckoutServiceInterface.php
│   ├── Exceptions
│   │   ├── CartItemProductMismatchException.php
│   │   └── NoCartItemsException.php
│   ├── ServiceProvider.php
│   ├── Specs
│   └── ValueObjects
└── Products
    ├── Entities
    │   └── Product.php
    ├── Exceptions
    │   ├── ProductNotFoundException.php
    │   └── ProductOutOfStockException.php
    ├── ProductRepositoryEloquent.php
    ├── ProductRepositoryInterface.php
    ├── ProductService.php
    ├── ProductServiceInterface.php
    ├── ServiceProvider.php
    └── Specs

```
